{"version":3,"names":[],"mappings":"","sources":["mailchimp.js"],"sourcesContent":["$(document).ready(function () {\n    var $form = $('#mc-embedded-subscribe-form');\n    if ($form.length > 0) {\n        $('form input[type=\"submit\"]').bind('click', function (event) {\n            if (event) event.preventDefault();\n            if (validate_input($form)) { \n                $(this).attr('disabled', true)\n                $form.find('#mc-email-group').removeClass('has-error')\n                register($form); \n            }\n            else {\n                $form.find('#mc-email-group').addClass('has-error')\n            }\n        });\n    }\n});\n\nfunction validate_input($form) {\n    return isEmail($form.find('input[type=\"email\"]').val())\n}\n\nfunction isEmail(email) {\n// See http://rosskendall.com/blog/web/javascript-function-to-check-an-email-address-conforms-to-rfc822\n\n    return /^([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x22([^\\x0d\\x22\\x5c\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x22)(\\x2e([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x22([^\\x0d\\x22\\x5c\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x22))*\\x40([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x5b([^\\x0d\\x5b-\\x5d\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x5d)(\\x2e([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x5b([^\\x0d\\x5b-\\x5d\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x5d))*$/.test(email);\n}\n\nfunction register($form) {\n    $.ajax({\n        type: $form.attr('method'),\n        url: $form.attr('action'),\n        data: $form.serialize(),\n        cache: false,\n        dataType: 'jsonp',\n        jsonp: 'c',\n        contentType: \"application/json; charset=utf-8\",\n        error: function (err) { alert(\"Could not connect to the registration server. Please try again later.\"); },\n        success: function (data) {\n            if (data.result != \"success\") {\n                if (data.msg.indexOf('is already') > 0 ) {\n                    $form.find('#email-error').text('This email address is already subscribed.');\n                }\n                $form.find('#mc-email-group').addClass('has-error')\n            } else {\n                alert(data.msg);\n                $form.find('#mc-email-group').addClass('has-success')\n            }\n        }\n    });\n}"],"file":"../mailchimp.js"}